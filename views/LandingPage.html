
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>List</title>
    <link rel="stylesheet" href="/css/layout.css">
    <link rel="stylesheet" href="/css/popupTable.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>



    <script src="/js/layout.js"></script>
    <script src="/js/utils.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
      
        h1 {
            text-align: center;
            margin-bottom: 20px;
        }
        .dashboard {
            margin-bottom: 40px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }
        .dashboard-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-align: center;
            color: #333;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        .chartcontainer {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }
        .card {
            background: #fff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .kpi-card {
            text-align: center;
            border: 1px solid #3498db;
            border-radius: 8px;
            padding: 15px;
            background-color: #ecf8ff;
        }
        .kpi-card .value {
            font-size: 2rem;
            font-weight: bold;
            color: #3498db;
        }
        .kpi-card .label {
            font-size: 0.9rem;
            color: #555;
        }
        .progress-container {
            background: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
            height: 20px;
            margin-top: 10px;
        }
        .progress {
            height: 100%;
            transition: width 0.5s;
        }
        canvas {
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .chart-title {
            text-align: center;
            margin: 10px 0;
            font-weight: bold;
        }
    
    </style>
<!-- Code injected by Five-server -->
  <script async data-id="five-server" data-file="c:\Users\Aravind J\OneDrive - SCH Infotech Private Limited\Desktop\UI\PageLayouts\html\PageLayout.html" type="application/javascript" src="/fiveserver.js"></script>
  
</head>

<body>
   <div class="sidebar active" id="sidebar">
    <h2>Menu</h2>
    <ul>
                 <li><a href="/index"><i class="fa fa-home"></i>Home</a></li>

         <li><a href="/views/LandingPage.html"><i class="fa fa-bar-chart fa-fw"></i><span class="menuname">Dashboard</span></i></a></li>
         <li>
            <a href="javascript:void(0)"><i class="fa fa-truck"></i><span class="menuname">Suppliers</span ><span class="arrow">></span></a>
            <ul class="submenu">
                <li><a href="/views/VendorRegisteration.htm"><i class="fa fa-truck"></i><span class="menuname">Supplier Registeration</span></a></li>
                <li><a href="/views/VendorList.htm"><i class="fa fa-truck"></i><span class="menuname">Supplier List</span></a></li>
            </ul>
        </li>
        <li>
            <a href="javascript:void(0)"><i class="fa fa-cubes"></i><span class="menuname">Material</span ><span class="arrow">></span></a>
            <ul class="submenu">
                <li><a href="/views/InsertMaterial.htm"><i class="fa fa-cubes"></i><span class="menuname">Create Material</span></a></li>
                <li><a href="/views/MaterialList.htm"><i class="fa fa-cubes"></i><span class="menuname">Material List</span></a></li>
            </ul>
        </li>
         <li>
            <a href="javascript:void(0)"><i class="fa fa-shopping-bag"></i><span class="menuname">Sales Orders</span ><span class="arrow">></span></a>
            <ul class="submenu">
                <li><a href="create-sales-order.html"><i class="fa fa-shopping-bag"></i><span class="menuname">Create Sales Order</span></a></li>
                <li><a href="sales-order-list.html"><i class="fa fa-shopping-bag"></i><span class="menuname">Sales Order List</span></a></li>
            </ul>
        </li>
        <li>
            <a href="javascript:void(0)"><i class="fa fa-shopping-cart"></i><span class="menuname">Purchase Orders </span><span class="arrow">></span></a>
            <ul class="submenu">
                <li><a href="create-purchase-order.html"><i class="fa fa-shopping-cart"></i><span class="menuname">Create Purchase Order</span></i></a></li>
                <li><a href="purchase-order-list.html"><i class="fa fa-shopping-cart"></i><span class="menuname">Purchase Order List</span></a></li>
            </ul>
        </li>
        <li>
            <a href="javascript:void(0)"><i class="fa fa-user"></i><span class="menuname">Users</span><span class="arrow">></span></a>
            <ul class="submenu">
                <li><a href="user-list.html"><i class="fa fa-user"></i><span>User List</span></a></li>
                <li><a href="create-user.html"><i class="fa fa-user"></i><span>Create User</span></a></li>
            </ul>
        </li>
        <li>
            <a href="javascript:void(0)"><i class="fa fa-tag"></i><span class="menuname">Buyers</span><span class="arrow">></span></a>
            <ul class="submenu">
                <li><a href="/getUserList"><i class="fa fa-tag"></i><span>Buyers List</span></a></li>
            </ul>
        </li>
    </ul>
</div>

 <head>
<div class="topbar">
    <button class="open-btn" onclick="toggleSidebar2()">â˜°</button>
    <h2>Smart Inventory System</h2>
    <div class="topbar-menu">
        <a href="/socket"><i class="fa fa-comments-o"></i>Chat Room</a>
        <a href="#">About Us</a>
        <a href="#">Contacts</a>
        <a href="#"><i class="fa fa-bell"></i></a>
        <a onclick="logout()"><i class="fa fa-sign-out"></i>Logout</a>
        <a href="/user/userProfile?user={{user}}"> <img class="profile" src="../images/home.jpg" alt="Picture"></a>

    </div>
</div>
</head>


    <main class="main-content shifted">
       
      
       
          <!-- Dashboard 1 -->
          <div class="sub-container">
            <div class="dashboard">
                <div class="dashboard-title">Sales Dashboard</div>
                <div class="chartcontainer">
                    <!-- KPI Cards -->
                    <div class="card kpi-card">
                        <i class="fas fa-shopping-cart fa-2x"></i>
                        <div class="value">1,250</div>
                        <div class="label">Total Orders</div>
                    </div>
                  
                    <div class="card kpi-card">
                        <i class="fas fa-users fa-2x"></i>
                        <div class="value">300</div>
                        <div class="label">Active Customers</div>
                    </div>
                    <div class="card kpi-card">
                        <i class="fas fa-box fa-2x"></i>
                        <div class="value">1,000</div>
                        <div class="label">Total Products</div>
                    </div>
        
                    <!-- Progress Bar Charts -->
                    <div class="card">
                        <h3>Order Fulfillment</h3>
                        <div class="progress-container">
                            <div class="progress" style="width: 75%; background: #3498db;"></div>
                        </div>
                        <div style="text-align: right;">75%</div>
                    </div>
                    <div class="card">
                        <h3>Customer Satisfaction</h3>
                        <div class="progress-container">
                            <div class="progress" style="width: 85%; background: #27ae60;"></div>
                        </div>
                        <div style="text-align: right;">85%</div>
                    </div>
                </div>
            </div>
        </div>
               
      
    </div>
  
</main>

<footer>
   
</footer>




  

   

</body>

</html>
<script>
    document.addEventListener("DOMContentLoaded", function () {
    const sidebar = document.getElementById("sidebar").querySelector("ul");
    // const role = getCookie('userRole'); // Retrieve role from cookies, if necessary

    function decodeJwt(token) {
  const base64Url = token.split('.')[1]; // Get payload
  const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/'); // URL-safe Base64 decode
  const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
  }).join(''));
  return JSON.parse(jsonPayload);
 }
 let token=localStorage.getItem('admintoken')

 let decodeToken=decodeJwt(token)

    // Check for cached menu data
    const cachedMenus = JSON.parse(sessionStorage.getItem('cachedMenus'));
    const cacheTimestamp = sessionStorage.getItem('cacheTimestamp');
    const cacheDuration = 60 * 60 * 1000; // Cache duration: 1 hour

    if (cachedMenus && cacheTimestamp && (Date.now() - cacheTimestamp < cacheDuration)) {
        // Load menus from cache if available and not expired
        loadMenus(cachedMenus);
    } else {
        // Fetch menu data from API with custom headers and store it in sessionStorage
        fetch('/permission', {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': 'Bearer YOUR_ACCESS_TOKEN',
                'Role': 'admin',
                'User':decodeToken.user
            }
        })
        .then(response => {
            if (!response.ok) {
                throw new Error("Network response was not ok: " + response.statusText);
            }
            return response.json();
        })
        .then(data => {
            console.log('data',data)
            const menus = data.menus;

            // Cache the menu data and timestamp
            sessionStorage.setItem('cachedMenus', JSON.stringify(menus));
            sessionStorage.setItem('cacheTimestamp', Date.now().toString());

            // Load menus from the fetched data
            loadMenus(menus);
        })
        .catch(error => console.error("Error fetching menu data:", error));
    }

    // Function to dynamically create the sidebar menu items
    function loadMenus(menus) {
        sidebar.innerHTML = ''; // Clear any existing menu items

        menus.forEach(menu => {
            const li = document.createElement("li");
            const link = document.createElement("a");
            link.href = menu.url;
     

            link.innerHTML = `<i></i><span class="menuname">${menu.name}</span>`;

            if (menu.subMenus && menu.subMenus.length > 0) {
                link.href = "javascript:void(0)";
                link.innerHTML += '<span class="arrow">></span>';
                li.appendChild(link);

                const subMenu = document.createElement("ul");
                subMenu.classList.add("submenu");
                subMenu.style.display = "none"; // Hide submenu initially

                menu.subMenus.forEach(sub => {
                    const subLi = document.createElement("li");
                    const subLink = document.createElement("a");
                    const iconElem=document.createElement("i");
                    const iconClasses = sub.icon.split(" ");
iconElem.classList.add(...iconClasses);
                    subLink.href = sub.url;
                    subLink.innerHTML = `<i class="${iconClasses.join(' ')}"><i><span>${sub.name}</span>`;
                    
                        subLi.appendChild(subLink);
                    subMenu.appendChild(subLi);

                });

                li.appendChild(subMenu);

                // Toggle submenu visibility on arrow click
                link.querySelector(".arrow").addEventListener("click", function (e) {
                    e.preventDefault();
                    subMenu.style.display = subMenu.style.display === "none" ? "block" : "none";
                    this.classList.toggle("open");
                });
            } else {
                li.appendChild(link);
            }

            sidebar.appendChild(li);
        });
    }


});

      enableSubmenus()
</script>